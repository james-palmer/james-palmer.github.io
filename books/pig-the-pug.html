<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pig the Pug - Read Aloud</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            border-radius: 20px 20px 0 0;
            margin: 0 auto;
            background: white;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 20px 20px 0 0;
        }

        .header h1 {
            font-size: 2rem; 
            margin-bottom: 10px;
            font-weight: bold;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .audio-controls {
            /* background: #f8f9fa; */
            padding: 20px;
            text-align: center;
            /* border-bottom: 1px solid #e9ecef; */
        }

        .play-button {
            background: linear-gradient(45deg,  #667eea 0%, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .play-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .play-button:active {
            transform: translateY(0);
        }

        .play-button.playing {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .progress-container {
            margin-top: 15px;
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            height: 100%;
            width: 0%;
            transition: width 0.1s ease;
        }

        .time-display {
            margin-top: 10px;
            font-size: 0.9rem;
            color: white;
        }

        .book-content {
            padding: 30px 20px;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333;
        }

        .page {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #ff6b6b;
        }

        .page-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 15px;
            text-align: center;
        }

        .text-line {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .text-line.active {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .text-line.highlighted {
            background: rgba(255, 107, 107, 0.1);
            border-left: 3px solid #ff6b6b;
        }

        .illustration {
            text-align: center;
            margin: 20px 0;
            font-size: 3rem;
        }

        @media (max-width: 480px) {
            .container {
                margin: 0;
                /* border-radius: 0; */
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .book-content {
                font-size: 1rem;
                padding: 20px 15px;
            }
            
            .page {
                padding: 15px;
            }
        }

        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .media-controls {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(45deg, #6c757d, #495057);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(108, 117, 125, 0.3);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.4);
        }

        .control-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê∑ Pig the Pug</h1>
            <p>Read Aloud with Melissa</p>
            <div class="audio-controls">
                <button class="play-button" id="playButton">
                    ‚ñ∂Ô∏è Play Story
                </button>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="time-display" id="timeDisplay">0:00 / 0:00</div>
            </div>
        </div>

    

        <div class="book-content" id="bookContent">
            <!-- Book content will be populated by JavaScript -->
        </div>

        <div class="footer">
            <p>Enjoy the story of Pig the Pug! üìö</p>
        </div>

        <!-- Additional Media Controls -->
        <div class="media-controls">
            <button class="control-btn" id="restartBtn">
                üîÑ Restart
            </button>
            <button class="control-btn" id="skipBackBtn">
                ‚è™ Skip Back
            </button>
            <button class="control-btn" id="skipForwardBtn">
                ‚è© Skip Forward
            </button>
        </div>
    </div>

    <audio id="audioPlayer" preload="auto" autoplay>
        <source src="audio/PigthePugMelissa.m4a" type="audio/mp4">
        Your browser does not support the audio element.
    </audio>

    <script>
        // Book content with timing information (approximate timestamps)
        const bookContent = [
            {
                lines: [
                    { text: "Pig was a Pug and I'm sorry to say,", start: 0, end: 3.5 },
                    { text: "he was greedy and selfish in most every way.", start: 3.5, end: 7 },
                    { text: "He lived in a flat with a sausage dog Trevor,", start: 7, end: 10 },
                    { text: "but when was he nice to him, I'll tell you, never!", start: 10, end: 13.5 }
                ]
            },
            {
                lines: [
                    { text: "\"You've got some nice toys there,\" poor Trevor would say.", start: 13.5, end: 17 },
                    { text: "Pig would growl and say, \"They're MINE! Go away!\"", start: 17, end: 21 },
                    { text: "\"but it might be more fun\" said Trevor to pig \"if we both play together\"", start: 21, end: 26.5 },
                    { text: "well Pig flipped his wig!", start: 26.5, end: 31 }
                ]
            },
            {
                lines: [
                    { text: "\"Pig,\" said his owner, \"you must learn to share.\"", start: 32, end: 36 },
                    { text: "\"If you don't, you'll end up in despair!\"", start: 36, end: 40 },
                    { text: "But Pig just snorted and turned away,", start: 40, end: 44 },
                    { text: "thinking he'd have it his way.", start: 44, end: 48 }
                ]
            },
            {
                lines: [
                    { text: "Then one day, Pig was feeling quite full,", start: 48, end: 52 },
                    { text: "from eating too much (he had no self-control).", start: 52, end: 56 },
                    { text: "He climbed up high on his mountain of toys,", start: 56, end: 60 },
                    { text: "and there he sat with his smug little poise.", start: 60, end: 64 }
                ]
            },
            {
                lines: [
                    { text: "But the pile was too high and Pig was too round,", start: 64, end: 68 },
                    { text: "and soon he was tumbling down to the ground.", start: 68, end: 72 },
                    { text: "He bounced and he rolled and he tumbled about,", start: 72, end: 76 },
                    { text: "until he was dizzy and worn out.", start: 76, end: 80 }
                ]
            },
            {
                lines: [
                    { text: "When he finally stopped, he was covered in toys,", start: 80, end: 84 },
                    { text: "and he realized he'd made a terrible noise.", start: 84, end: 88 },
                    { text: "He looked at Trevor and felt quite ashamed,", start: 88, end: 92 },
                    { text: "for being so selfish and terribly lame.", start: 92, end: 96 }
                ]
            },
            {
                lines: [
                    { text: "From that day on, Pig learned to share,", start: 96, end: 100 },
                    { text: "and he became a much better dog, I swear!", start: 100, end: 104 },
                    { text: "He'd give Trevor toys and treats galore,", start: 104, end: 108 },
                    { text: "and they'd play together forevermore.", start: 108, end: 112 }
                ]
            },
            {
                lines: [
                    { text: "So remember this lesson, both big and small:", start: 112, end: 116 },
                    { text: "sharing is caring, after all!", start: 116, end: 120 },
                    { text: "The End", start: 120, end: 124 }
                ]
            }
        ];

        // DOM elements
        const audioPlayer = document.getElementById('audioPlayer');
        const playButton = document.getElementById('playButton');
        const progressBar = document.getElementById('progressBar');
        const timeDisplay = document.getElementById('timeDisplay');
        const bookContentDiv = document.getElementById('bookContent');
        const restartBtn = document.getElementById('restartBtn');
        const skipBackBtn = document.getElementById('skipBackBtn');
        const skipForwardBtn = document.getElementById('skipForwardBtn');

        let isPlaying = false;
        let currentLineIndex = 0;
        let allLines = [];

        // Initialize the book content
        function initializeBook() {
            bookContent.forEach((page, pageIndex) => {
                const pageDiv = document.createElement('div');
                pageDiv.className = 'page';
                
                const titleDiv = document.createElement('div');
                titleDiv.className = 'page-title';
                titleDiv.textContent = page.title;
                pageDiv.appendChild(titleDiv);

                page.lines.forEach((line, lineIndex) => {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'text-line';
                    lineDiv.textContent = line.text;
                    lineDiv.dataset.start = line.start;
                    lineDiv.dataset.end = line.end;
                    lineDiv.dataset.index = allLines.length;
                    pageDiv.appendChild(lineDiv);
                    allLines.push(lineDiv);
                });

                bookContentDiv.appendChild(pageDiv);
            });
        }

        // Update progress bar and time display
        function updateProgress() {
            const currentTime = audioPlayer.currentTime;
            const duration = audioPlayer.duration;
            
            if (duration) {
                const progress = (currentTime / duration) * 100;
                progressBar.style.width = progress + '%';
                
                const currentMinutes = Math.floor(currentTime / 60);
                const currentSeconds = Math.floor(currentTime % 60);
                const durationMinutes = Math.floor(duration / 60);
                const durationSeconds = Math.floor(duration % 60);
                
                timeDisplay.textContent = 
                    `${currentMinutes}:${currentSeconds.toString().padStart(2, '0')} / ${durationMinutes}:${durationSeconds.toString().padStart(2, '0')}`;
            }
        }

        // Highlight current line based on audio time
        function highlightCurrentLine() {
            const currentTime = audioPlayer.currentTime;
            
            // Remove previous highlights
            allLines.forEach(line => {
                line.classList.remove('active', 'highlighted');
            });
            
            // Find and highlight current line
            allLines.forEach((line, index) => {
                const start = parseFloat(line.dataset.start);
                const end = parseFloat(line.dataset.end);
                
                if (currentTime >= start && currentTime <= end) {
                    line.classList.add('active');
                    line.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else if (currentTime > end) {
                    line.classList.add('highlighted');
                }
            });
        }

        // Play/pause functionality
        function togglePlay() {
            if (isPlaying) {
                audioPlayer.pause();
                playButton.textContent = '‚ñ∂Ô∏è Play Story';
                playButton.classList.remove('playing');
            } else {
                audioPlayer.play();
                playButton.textContent = '‚è∏Ô∏è Pause';
                playButton.classList.add('playing');
            }
            isPlaying = !isPlaying;
        }

        // Media control functions
        function restartAudio() {
            audioPlayer.currentTime = 0;
            audioPlayer.play();
            isPlaying = true;
            playButton.textContent = '‚è∏Ô∏è Pause';
            playButton.classList.add('playing');
        }

        function skipBack() {
            audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 10);
        }

        function skipForward() {
            audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 10);
        }

        // Auto-play when page loads
        function setupAutoPlay() {
            // Modern browsers require user interaction for autoplay
            // So we'll set up the audio to play when user first interacts
            document.addEventListener('click', function() {
                if (!isPlaying && audioPlayer.paused) {
                    audioPlayer.play();
                    isPlaying = true;
                    playButton.textContent = '‚è∏Ô∏è Pause';
                    playButton.classList.add('playing');
                }
            }, { once: true });
        }

        // Event listeners
        playButton.addEventListener('click', togglePlay);
        restartBtn.addEventListener('click', restartAudio);
        skipBackBtn.addEventListener('click', skipBack);
        skipForwardBtn.addEventListener('click', skipForward);

        audioPlayer.addEventListener('timeupdate', () => {
            updateProgress();
            highlightCurrentLine();
        });

        audioPlayer.addEventListener('ended', () => {
            isPlaying = false;
            playButton.textContent = '‚ñ∂Ô∏è Play Story';
            playButton.classList.remove('playing');
            
            // Remove all highlights when audio ends
            allLines.forEach(line => {
                line.classList.remove('active', 'highlighted');
            });
        });

        // Initialize the book when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeBook();
            setupAutoPlay();
        });
    </script>
</body>
</html> 